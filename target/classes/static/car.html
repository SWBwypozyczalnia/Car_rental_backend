<!DOCTYPE HTML>
<html>
<head>
    <title>Samochód</title>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, user-scalable=no">
    <link rel="stylesheet" href="assets/css/main.css">
</head>
<body>
<div id="wrapper">
    <!-- Header -->
    <header id="header">
        <div class="inner">
            <a href="index.html" class="logo">
                <span class="symbol"><img src="images/logo.svg" alt="" /></span><span class="title">Szczegóły samochodu</span>
            </a>
        </div>
    </header>

    <!-- Główna sekcja -->
    <div id="main">
        <div class="inner">
            <h1 id="car-title">Ładowanie...</h1>
            <div class="image main">
                <img id="car-image" src="images/placeholder.png" alt="Samochód">
            </div>
            <p id="car-description">Ładowanie opisu samochodu...</p>
            <h2>Cena za dzień: <span id="car-price"></span> PLN</h2>
        </div>
    </div>

    <!-- Footer -->
    <footer id="footer">
        <div class="inner">
            <p>&copy; Wypożyczalnia samochodów. All rights reserved.</p>
        </div>
    </footer>
</div>

<script>
    // Pobranie ID samochodu z parametru URL
    const urlParams = new URLSearchParams(window.location.search);
    const carId = urlParams.get("id");

    // Sprawdzenie, czy ID jest obecne
    if (!carId) {
        document.querySelector("#main").innerHTML = "<h1>Nie znaleziono samochodu</h1>";
    } else {
        // Pobranie danych samochodu z API
        fetch(`http://localhost:8080/api/cars/${carId}`)
            .then((response) => response.json())
            .then((car) => {
                document.querySelector("#car-title").textContent = `${car.mark} ${car.model}`;
                document.querySelector("#car-image").src = `http://localhost:8080/api/cars/images/${car.id}`;
                document.querySelector("#car-description").textContent = car.description;
                document.querySelector("#car-price").textContent = car.price;
            })
            .catch((error) => {
                console.error("Błąd ładowania szczegółów samochodu:", error);
                document.querySelector("#main").innerHTML = "<h1>Błąd ładowania szczegółów samochodu</h1>";
            });
    }
</script>
</body>
</html>
